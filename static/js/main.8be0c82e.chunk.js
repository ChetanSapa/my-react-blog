(this["webpackJsonpmy-react-01"]=this["webpackJsonpmy-react-01"]||[]).push([[0],{106:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(38),s=n(3),a="dialogs/ADD-MESSAGE",c={dialogData:[{id:1,name:"Matthew",ava:"https://pbs.twimg.com/media/C5TmS81W8AET_95.jpg"},{id:2,name:"John",ava:"https://pbs.twimg.com/profile_images/835090891018809348/Vkhzemz2_400x400.jpg"},{id:3,name:"Mario",ava:"https://i1.sndcdn.com/avatars-000357444641-8lru4y-t500x500.jpg"}],messages:[{id:1,message:"Hi!"},{id:2,message:"How are you, man?"},{id:3,message:"I'm fine! And How are you?)"}]},i=function(t){return{type:a,newMessageBody:t}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:var n=e.newMessageBody;return Object(s.a)(Object(s.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{id:6,message:n}])});default:return t}}},130:function(t,e,n){"use strict";n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return S})),n.d(e,"f",(function(){return P}));var r=n(10),s=n.n(r),a=n(18),c=n(38),i=n(3),o=n(15),u=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(i.a)(Object(i.a)({},t),r):t}))},l="users/FOLLOW",d="users/UNFOLLOW",j="users/SET_USERS",f="users/SET_CURRENT_PAGE",b="users/SET_TOTAL_COUNT",p="users/TOGGLE_IS_FETCHING",h="users/TOGGLE_IS_FOLLOWING_PROGRESS",O={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},m=function(t){return{type:l,userId:t}},g=function(t){return{type:d,userId:t}},v=function(t){return{type:f,currentPage:t}},x=function(t){return{type:p,isFetching:t}},w=function(t,e){return{type:h,followingInProgress:t}},y=function(t,e){return function(){var n=Object(a.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),r(v(t)),n.next=4,o.c.getUsers(t,e);case 4:a=n.sent,r(x(!1)),r((c=a.items,{type:j,users:c})),r((s=a.totalCount,{type:b,totalCount:s}));case 8:case"end":return n.stop()}var s,c}),n)})));return function(t){return n.apply(this,arguments)}}()},_=function(){var t=Object(a.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(w(!0,e)),t.next=3,r(e);case 3:0===t.sent.data.resultCode&&n(a(e)),n(w(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,s){return t.apply(this,arguments)}}(),S=function(t){return function(){var e=Object(a.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(t,n,o.c.follow.bind(o.c),m);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t){return function(){var e=Object(a.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(t,n,o.c.unfollow.bind(o.c),g);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(i.a)(Object(i.a)({},t),{},{users:u(t.users,e.userId,"id",{followed:!0})});case d:return Object(i.a)(Object(i.a)({},t),{},{users:u(t.users,e.userId,"id",{followed:!1})});case j:return Object(i.a)(Object(i.a)({},t),{},{users:Object(c.a)(e.users)});case f:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.currentPage});case b:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.totalCount});case p:return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});case h:return Object(i.a)(Object(i.a)({},t),{},{followingInProgress:e.followingInProgress?[].concat(Object(c.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}},135:function(t,e,n){t.exports={descr:"ProfileInfo_descr__3JU_L"}},136:function(t,e,n){t.exports={item:"Post_item__2kphO"}},15:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return i}));var r=n(131),s=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"8dddc296-fc0d-42d5-9d28-b2eef5446365"}}),a={getUsers:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return s.get("users?page=".concat(t,"&count=").concat(e),{withCredentials:!0}).then((function(t){return t.data}))},follow:function(t){return s.post("follow?".concat(t),{},{})},unfollow:function(t){return s.delete("follow?".concat(t),{})},getProfile:function(t){return console.warn("Obsolete method. Please use profileAPI obj"),c.getProfile(t)}},c={getProfile:function(t){return s.get("profile/"+t)},getStatus:function(t){return s.get("profile/status/"+t)},updateStatus:function(t){return s.put("profile/status/",{status:t})}},i={me:function(){return s.get("auth/me")},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s.post("auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return s.delete("auth/login")}}},246:function(t,e,n){},247:function(t,e,n){},25:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return j}));var r=n(3),s=n(89),a=n(1),c=(n(0),n(54)),i=n.n(c),o=n(87),u=function(t){var e=t.meta,n=e.touched,r=e.error,s=t.children,c=r&&n;return Object(a.jsxs)("div",{className:i.a.formControl+" "+(c?i.a.error:""),children:[Object(a.jsx)("div",{children:s}),c&&Object(a.jsx)("span",{children:r})]})},l=function(t){var e=t.input,n=(t.meta,t.child,Object(s.a)(t,["input","meta","child"]));return Object(a.jsx)(u,Object(r.a)(Object(r.a)({},t),{},{children:Object(a.jsx)("textarea",Object(r.a)(Object(r.a)({},e),n))}))},d=function(t){var e=t.input,n=(t.meta,t.child,Object(s.a)(t,["input","meta","child"]));return Object(a.jsx)(u,Object(r.a)(Object(r.a)({},t),{},{children:Object(a.jsx)("input",Object(r.a)(Object(r.a)({},e),n))}))},j=function(t,e,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(a.jsxs)("div",{children:[Object(a.jsx)(o.a,Object(r.a)({placeholder:t,name:e,component:s,validate:n},c))," ",i]})}},26:function(t,e,n){t.exports={nav:"Navbar_nav__pA07c",item:"Navbar_item__3JM9i",active:"Navbar_active__bYtCM"}},289:function(t,e,n){"use strict";n.r(e);var r=n(1);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(9),a=n(10),c=n.n(a),i=n(18),o=n(38),u=n(3),l=n(15),d="profile/ADD-POST",j="profile/SET_USER_PROFILE",f="profile/SET_STATUS",b="profile/DELETE_POST",p={posts:[{id:1,message:"Hi! How are you?",likesCount:"like 10"},{id:2,message:"It's my first post",likesCount:"like 25"}],profile:null,status:" "},h=function(t){return{type:f,status:t}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:var n={id:5,message:e.newPostBody,likesCount:0};return Object(u.a)(Object(u.a)({},t),{},{posts:[].concat(Object(o.a)(t.posts),[n]),newPostText:""});case b:return Object(u.a)(Object(u.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!=e.id}))});case f:return Object(u.a)(Object(u.a)({},t),{},{status:e.status});case j:return Object(u.a)(Object(u.a)({},t),{},{profile:e.profile});default:return t}},m=n(106),g=n(130),v=n(39),x="auth/SET_USER_DATA",w={email:null,userId:null,login:null,isAuth:!1,isFetching:!1},y=function(t,e,n,r){return{type:x,payload:{email:t,userId:e,login:n,isAuth:r}}},_=function(){return function(){var t=Object(i.a)(c.a.mark((function t(e){var n,r,s,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.me();case 2:0===(n=t.sent).data.resultCode&&(r=n.data.data,s=r.email,a=r.id,i=r.login,e(y(s,a,i,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case x:return Object(u.a)(Object(u.a)({},t),e.payload);default:return t}},P=n(132),C=n(129),k="app/INITIALIZED_SUCCESS",E={initialized:!1},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return Object(u.a)(Object(u.a)({},t),{},{initialized:!0});default:return t}},A=Object(s.c)({profilePage:O,dialogsPage:m.b,usersPage:g.a,auth:S,form:C.a,app:I}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,T=Object(s.e)(A,N(Object(s.a)(P.a)));window.store=T;var U=T,D=n(0),L=n.n(D),M=n(64),F=n.n(M),B=(n(246),n(29)),z=n(30),R=n(32),G=n(31),H=(n(247),n(26)),W=n.n(H),J=n(17),Y=function(t){return Object(r.jsxs)("nav",{className:W.a.nav,children:[Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(J.b,{to:"/Profile",activeClassName:W.a.active,children:"Profile"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(J.b,{to:"/Dialogs",activeClassName:W.a.active,children:"Dialogs"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(J.b,{to:"/Users",children:"Users"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(J.b,{to:"#",children:"Music"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(J.b,{to:"#",children:"Settings"})})]})},K=n(11),V=n(135),X=n.n(V),Z=n(66),q=(L.a.Component,n(88)),$=function(t){var e=Object(D.useState)(!1),n=Object(q.a)(e,2),s=n[0],a=n[1],c=Object(D.useState)(t.status),i=Object(q.a)(c,2),o=i[0],u=i[1];Object(D.useEffect)((function(){u(t.status)}),[t.status]);return Object(r.jsxs)("div",{children:[!s&&Object(r.jsx)("div",{children:Object(r.jsx)("span",{onDoubleClick:function(){a(!0)},children:t.status||"add status"})}),s&&Object(r.jsx)("div",{children:Object(r.jsx)("input",{onBlur:function(){a(!1),t.updateStatus(o)},onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,value:o})})]})},Q=function(t){var e=t.profile,n=t.status,s=t.updateStatus;return e?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:"https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg?auto=compress&cs=tinysrgb&h=350"})}),Object(r.jsxs)("div",{className:X.a.descr,children:[Object(r.jsx)($,{status:n,updateStatus:s}),Object(r.jsx)("img",{src:e.photos.large,alt:""}),Object(r.jsx)("br",{}),Object(r.jsxs)("span",{children:["Your name is? ",e.fullName]}),Object(r.jsx)("br",{}),Object(r.jsxs)("span",{children:["Wat you looking for? ",e.lookingForAJobDescription]})]})]}):Object(r.jsx)(Z.a,{})},tt=n(93),et=n.n(tt),nt=n(136),rt=n.n(nt),st=function(t){return Object(r.jsxs)("div",{className:rt.a.item,children:[Object(r.jsx)("img",{src:"https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg",alt:""}),Object(r.jsx)("div",{children:t.message}),Object(r.jsx)("span",{children:t.likesCount})]})},at=n(87),ct=n(128),it=n(42),ot=n(25),ut=L.a.memo((function(t){console.log("Render");var e=t.posts.map((function(t){return Object(r.jsx)(st,{message:t.message,likesCount:t.likesCount})}));return Object(r.jsxs)("div",{className:et.a.myPostsDesc,children:[Object(r.jsx)("h3",{children:"My posts"}),Object(r.jsx)("div",{children:Object(r.jsx)(dt,{onSubmit:function(e){t.addPost(e.newPostBody)}})}),Object(r.jsx)("div",{className:et.a.posts,children:e})]})})),lt=Object(it.a)(10),dt=Object(ct.a)({form:"AddMessageForm"})((function(t){return Object(r.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(at.a,{component:ot.b,name:"newPostBody",placeholder:"Enter your message",validate:[it.b,lt]})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Send message"})})]})})),jt=ut,ft=n(12),bt=Object(ft.b)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){t(function(t){return{type:d,newPostBody:t}}(e))}}}))(jt),pt=function(t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Q,{profile:t.profile,status:t.status,updateStatus:t.updateStatus}),Object(r.jsx)(bt,{})]})},ht=function(t){Object(R.a)(n,t);var e=Object(G.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return Object(z.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(this.props.isAuth?t=this.props.authorisedUserId:this.props.history.push("/login")),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)(pt,Object(u.a)(Object(u.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))})}}]),n}(L.a.Component),Ot=Object(s.d)(Object(ft.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorisedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:function(t){return function(){var e=Object(i.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.c.getProfile(t);case 2:r=e.sent,n((s=r.data,{type:j,profile:s}));case 4:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}()},getStatus:function(t){return function(){var e=Object(i.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.getStatus(t);case 2:r=e.sent,n(h(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateStatus:function(t){return function(){var e=Object(i.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.updateStatus(t);case 2:0===e.sent.data.resultCode&&n(h(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),K.f)(ht),mt=n(96),gt=n.n(mt),vt=function(t){return Object(r.jsxs)("header",{className:gt.a.header,children:[Object(r.jsx)("img",{src:"https://www.freelogodesign.org/Content/img/logo-ex-7.png"}),Object(r.jsx)("div",{className:gt.a.loginBlock,children:t.isAuth?Object(r.jsxs)("div",{children:[t.login," - ",Object(r.jsx)("button",{onClick:t.logout,children:"Log out"})]}):Object(r.jsx)(J.b,{to:"/login",children:"Login"})})]})},xt=function(t){Object(R.a)(n,t);var e=Object(G.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return Object(z.a)(n,[{key:"render",value:function(){return Object(r.jsx)(vt,Object(u.a)({},this.props))}}]),n}(L.a.Component),wt=Object(ft.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logout:function(){return function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.logout();case 2:0===t.sent.data.resultCode&&e(y(null,null,null,!0));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(xt),yt=n(54),_t=n.n(yt),St=Object(ct.a)({form:"login"})((function(t){var e=t.handleSubmit,n=t.error;return Object(r.jsx)("div",{style:{textAlign:"center"},children:Object(r.jsxs)("form",{onSubmit:e,children:[Object(r.jsxs)("div",{children:[Object(ot.c)("Email","email",[it.b],ot.a),Object(ot.c)("Password","password",[it.b],ot.a,{type:"password"}),Object(ot.c)(null,"rememberMe",[],ot.a,{type:"checkbox"},"remember me")]}),n&&Object(r.jsx)("div",{className:_t.a.formSummaryError,children:n}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})})),Pt=Object(ft.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n){return function(){var r=Object(i.a)(c.a.mark((function r(s){var a,i;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.login(t,e,n);case 2:0===(a=r.sent).data.resultCode?s(_()):(i=a.data.messages.length>0?a.data.messages[0]:"Some error",s(Object(v.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}})((function(t){return t.isAuth?Object(r.jsx)(K.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{style:{textAlign:"center"},children:"Login"}),Object(r.jsx)(St,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe)}})]})})),Ct=function(t){return function(e){return Object(r.jsx)(D.Suspense,{fallback:Object(r.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),children:Object(r.jsx)(t,Object(u.a)({},e))})}},kt=L.a.lazy((function(){return n.e(4).then(n.bind(null,295))})),Et=L.a.lazy((function(){return n.e(3).then(n.bind(null,294))})),It=function(t){Object(R.a)(n,t);var e=Object(G.a)(n);function n(){return Object(B.a)(this,n),e.apply(this,arguments)}return Object(z.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(wt,{}),Object(r.jsx)(Y,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(K.b,{path:"/dialogs",render:Ct(kt)}),Object(r.jsx)(K.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(Ot,{})}}),Object(r.jsx)(K.b,{path:"/users",render:Ct(Et)}),Object(r.jsx)(K.b,{path:"/login",render:function(){return Object(r.jsx)(Pt,{})}})]})]}):Object(r.jsx)(Z.a,{})}}]),n}(L.a.Component),At=Object(s.d)(K.f,Object(ft.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){t(_()).then((function(){t({type:k})}))}}}))(It);F.a.render(Object(r.jsx)(J.a,{basename:"/https,://chetansapa.github.io/my-react-blog",children:Object(r.jsx)(ft.a,{store:U,children:Object(r.jsx)(At,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},42:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}));var r=function(t){if(!t)return"Field is required"},s=function(t){return function(e){if(e&&e.length>t)return"Mal length is ".concat(t," symbols")}}},54:function(t,e,n){t.exports={formControl:"FormControls_formControl__rHetS",error:"FormControls_error__1lukK",formSummaryError:"FormControls_formSummaryError__3ToBJ"}},66:function(t,e,n){"use strict";var r=n(1),s=(n(0),n.p+"static/media/Spinner-5.e9202c75.gif");e.a=function(t){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:s})})}},93:function(t,e,n){t.exports={myPostsDesc:"Myposts_myPostsDesc__2hCnO"}},96:function(t,e,n){t.exports={header:"Header_header__1opt0",loginBlock:"Header_loginBlock__16cZW"}}},[[289,1,2]]]);
//# sourceMappingURL=main.8be0c82e.chunk.js.map